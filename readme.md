# Grok Code ‚Äî Catalog Generator Service

–°–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞.
–ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –∞—Ä—Ö–∏–≤ —Å CSV-–∫–∞—Ç–∞–ª–æ–≥–æ–º –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤.

–ü—Ä–æ–µ–∫—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **TDD**, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é –∏ CI/CD.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä —Ç–µ–º—ã –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ —Ç–µ–º–µ –∏–∑ Pexels API
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é DeepSeek
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ CSV-–∫–∞—Ç–∞–ª–æ–≥–∞
- –£–ø–∞–∫–æ–≤–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∞—Ä—Ö–∏–≤
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üß© –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞

1. **–í—ã–±–æ—Ä —Ç–µ–º—ã –º–∞–≥–∞–∑–∏–Ω–∞**
   - –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ç–µ–º–∞ –∏–∑ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
     _(–Ω–∞–ø—Ä–∏–º–µ—Ä: clothing, electronics, home decor, beauty, sports –∏ —Ç.–¥.)_

2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ API:
     ```
     https://api.pexels.com/v1/search
     ```
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç **160 –¥–æ 240 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   - API –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤—ã–¥–∞—á—É **80 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å**, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSV-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ (DeepSeek)**
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `alt` –∏–∑ JSON-–æ—Ç–≤–µ—Ç–∞ Pexels
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è CSV —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏:

     ```csv
     id,title_en,description_en,category,old-price,new-price
     ```

   - –ü—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
     - `id` ‚Äî –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (–Ω–∞—á–∏–Ω–∞—è —Å 1)
     - `title_en` ‚Äî **—É–∫–æ—Ä–æ—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è** `alt`
     - `description_en` ‚Äî **—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
       (300‚Äì500 —Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞ –æ—Å–Ω–æ–≤–µ `alt`)
     - `category` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞ –º–∞–≥–∞–∑–∏–Ω–∞
     - `old-price` ‚Äî —Å–ª—É—á–∞–π–Ω–∞—è —Ü–µ–Ω–∞ –æ—Ç **100 –¥–æ 10 000 USD**
     - `new-price` ‚Äî `old-price - 10%`

4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**
   - –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ CSV-—Ñ–∞–π–ª —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤ (`.zip`)
   - –ê—Ä—Ö–∏–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.11+**
- **TDD (pytest)**
- **Docker**
- **GitHub Actions (CI)**
- **Pexels API**
- **DeepSeek API**

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme_selector.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pexels_client.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deepseek_client.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ catalog_builder.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ archive_service.py
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_theme_selector.py
‚îÇ   ‚îú‚îÄ‚îÄ test_pexels_client.py
‚îÇ   ‚îú‚îÄ‚îÄ test_deepseek_client.py
‚îÇ   ‚îú‚îÄ‚îÄ test_catalog_builder.py
‚îÇ   ‚îî‚îÄ‚îÄ test_archive_service.py
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml
‚îú‚îÄ‚îÄ catalogs/          # Generated catalogs (created by web server)
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ web_server.py     # Web interface server
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .env.example
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π

```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ API –∫–ª—é—á–∏
```

### 3. –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```bash
python web_server.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://localhost:8000`

### 4. CLI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
python -m app.main --output-dir my_catalog
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/ -v

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
python -m pytest tests/ --cov=app --cov-report=html
```

---

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–í–µ–±-—Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤:

- **–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: `http://localhost:8000`
- **API endpoints**:
  - `GET /` - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  - `POST /api/generate-catalog` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
  - `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

---

## üìä –ü—Ä–∏–º–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞

```
catalog_1703123456/
‚îú‚îÄ‚îÄ catalog.csv
‚îî‚îÄ‚îÄ images/
    ‚îú‚îÄ‚îÄ 1-1.jpg
    ‚îú‚îÄ‚îÄ 2-1.jpg
    ‚îî‚îÄ‚îÄ ...
```

**catalog.csv:**
```csv
id,title_en,description_en,category,old-price,new-price
1,"Elegant Evening Dress","This stunning evening dress features intricate beadwork and flowing fabric...",fashion,2999.99,2699.99
2,"Casual Denim Jacket","A versatile denim jacket perfect for layering, featuring classic styling...",fashion,1899.99,1709.99
```

---

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–µ–º—ã

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `SHOP_THEMES` –≤ `app/services/theme_selector.py`:

```python
SHOP_THEMES = [
    "clothing",
    "electronics",
    # –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à—É —Ç–µ–º—É
]
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –≤ `app/services/deepseek_client.py` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª—è –æ–ø–∏—Å–∞–Ω–∏–π.

---

## üö¢ Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -f docker/Dockerfile -t catalog-generator .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 --env-file .env catalog-generator
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–û–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: 160-240 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ 5-10 –º–∏–Ω—É—Ç
- **Batch API**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è)
- **Fallback**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç-—Å—é–∏—Ç
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. LICENSE —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
